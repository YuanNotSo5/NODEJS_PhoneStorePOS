<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage</title>        
    <link rel="stylesheet" href="/css/dashboard.css">
    <script src="/js/dashboard.js"></script>

    <link rel="stylesheet" href="/css/index.css">

    <link rel="stylesheet" href="/css/avatar.css">
    <script src="/js/avatar.js"></script>

</head>
<body>
    {{> dashboard}}
    {{> header}}\
    <div id = "main">
    <div class="container">
        <div class="row tm-content-row">
            <div class="col">
                <h2 id = "employee_header" style="color:rgb(177, 36, 36);">LỊCH SỬ MUA</h2>
                
                <div class="table_container" style="max-height: 465px; overflow-y: scroll;">
                    <table class="table table-striped table-hover border border-2 shadow rounded" id="employeeTable">
                        <thead>
                            <tr id = "list_header" class="sticky-top table-primary">
                                <th scope="col">ORDER NO.</th>
                                <th scope="col">DATE</th>
                                <th scope="col">EMPLOYEE</th>
                                <th scope="col">TOTAL AMOUNT</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each listHistory}}
                                <tr class="customer-row" id={{_id}}>
                                    <th scope="row"><b>{{@index}}</b></th>
                                    <td>{{formatDate date}}</td>
                                    <td><b>{{employeeName}}</b></td>
                                    <td><b>{{totalAmount}}</b></td>
                                </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>  
    </div>
      
</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var rows = document.querySelectorAll('.customer-row');

        rows.forEach(function (row) {
            row.addEventListener('click', function () {
                var id = row.id;
                if (id) {
                    window.location.href = '/invoices/details/' + id;
                }
            });
        });
    });
</script>
</html>